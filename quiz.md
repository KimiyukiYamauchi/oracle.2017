# オラクル課題

## 11/14
### 各自のユーザ

|           タイトル          |                                                                   説明                                                                   | 評価 | カテゴリ | リリース日  |
|-----------------------------|------------------------------------------------------------------------------------------------------------------------------------------|------|----------|-------------|
| Willie and<br>Christmas Too | Willieの友達はみなサンタに宛て<br>たクラスマスに欲しいもののリストを作<br>りましたが、Willieだけはまだ自分<br>のリストを作っていません。 | G    | CHILD    | 05-OCT-2015 |
| Alien Again                 | SFの世界の物語です。ヒロインは<br>惑星をエイリアンから守ることがで<br>きるでしょうか。                                                   | R    | SCIFI    | 19-MAY-2016 |
| The Glob                    | 隕石がアメリカの小さな町に落下<br>し、肉食性の地球外生物が放たれ<br>る古典的作品。                                                       | NR   | SCIFI    | 12-AUG-2016 |
| My Day Off                  | 学校をさぼってニューヨークに出か<br>けて若者が、運と知恵を使って1日<br>を切り抜ける姿をえがきます。                                      | PG   | COMEDY   | 12-JUL-2017 |
| Miracles on Ice             | サンタクロースを信じない6歳の女<br>の子が、サンタクロースに出会うこ<br>とで奇跡を信じるようになります。                                  | PG   | DRAMA    | 12-SEP-2017 |
| Soda Gang                   | ドラッグの隠し場所を発見した若い<br>カップルが、ギャングに狙われま<br>す。                                                               | NR   | ACTION   | 01-JUN-2017 |

|   名    |      姓      |        番地        |     市     |   電話番号   |   入会日    |
|---------|--------------|--------------------|------------|--------------|-------------|
| Garmen  | Velasquez    | 283 King<br>Street | Seattle    | 206-899-6666 | 08-MAR-2010 |
| LaDoris | Ngao         | 5 Modrany          | Bratislava | 586-355-8882 | 08-MAR-2010 |
| Midori  | Nagayama     | 68 Via Centrale    | Sao Paolo  | 254-852-5764 | 17-JUN-2011 |
| Mark    | Quick-to-See | 6921 King Way      | Lagos      | 63-559-7777  | 07-APR-2012 |
| Audry   | Ropeburn     | 86 Chu Street      | Hong Kong  | 41-559-97    | 18-JAN-2013 |
| Molly   | Urguhart     | 3035 Laurier       | QueBec     | 418-542-9988 | 18-JAN-2013            |


1. MEMBER表のMEMBER_IDに値を設定するために順序(MEMBER_ID_SEQ)を作成。  
101から開始し、値のキャッシュは行わない
1. TITLE表のTITLE_IDに値を設定するために順序(TITLE_ID_SEQ)を作成。  
92から開始し、値のキャッシュは行わない
1. TITLE表に映画のタイトルを追加、正しく追加されていること確認
1. MEMBER表に映画のタイトルを追加、但しく追加されていること確認


## 11/9
### 各自のユーザ

#### 表名: MEMBER

|    列名    | キー | NULL/Unique | デフォルト値 | データ型 | データ長 |
|------------|------|-------------|--------------|----------|---------:|
| MEMBER_ID  | PK   | NN,U        |              | NUMBER   |       10 |
| LAST_NAME  |      | NN          |              | VARCHAR2 |       25 |
| FIRST_NAME |      |             |              | VARCHAR2 |       25 |
| ADDRESS    |      |             |              | VARCHAR2 |      100 |
| CITY       |      |             |              | VARCHAR2 |       30 |
| PHONE      |      |             |              | VARCHAR2 |       15 |
| JOIN_DATE  |      | NN          | System Date  | DATE     |          |

#### 表名:TITLE

| 列名          | キー   | NULL/Unique   | Check                                                           | データ型   | データ長   |
| ------------- | ------ | ------------- | -------                                                         | ---------- | ---------:|
| TITLE_ID      | PK     | NN,U          |                                                                 | NUMBER     | 10         |
| TITLE         |        | NN            |                                                                 | VARCHAR2   | 60         |
| DESCRIPTION   |        | NN            |                                                                 | VARCHAR2   | 400        |
| RATING        |        |               | G, PG, R, <br>NC17, NR                                          | VARCHAR2   | 4          |
| CATEGORY      |        |               | DRAMA,<br>COMEDY,<br>ACTION,<br>CHILD,<br>SCIFI,<br>DOCUMENTARY | VARCHAR2   | 20         |
| RELEASE_DATE  |        |               |                                                                 | DATE       |            |

#### 表名: TITLE_COPY

|   列名   |  キー | NULL/Unique |                      Check                      | FK Ref Table | FK REF Col | データ型 | データ長 |
|----------|-------|-------------|-------------------------------------------------|--------------|------------|----------|---------:|
| COPY_ID  | PK    | NN,U        |                                                 |              |            | NUMBER   |       10 |
| TITLE_ID | PK,FK | NN,U        |                                                 | TITLE        | TITLE_ID   | NUMBER   |       10 |
| STATUS   |       | NN          | AVAILABLE,<br>DESTROYED,<br>RENTED,<br>RESERVED |              |            | VARCHAR2 | 15         |

#### 表名: RENTAL

|     列名     |  キー  |        デフォルト         | FK Ref Table | FK Ref Col | データ型 | データ長 |
|--------------|--------|---------------------------|--------------|------------|----------|----------|
| BOOK_DATE    | PK     | System Date               |              |            | DATE     |          |
| MEMBER_ID    | PK,FK1 |                           | MEMBER       | MEMBER_ID  | NUMBER   |       10 |
| COPY_ID      | PK,FK2 |                           | TITLE_COPY   | COPY_ID    | NUMBER   |       10 |
| ACT_RET_DATE |        |                           |              |            | DATE     |          |
| EXP_RET_DATE |        | System Date + <br> 2 days |              |            | DATE     |          |
| TITLE_ID     | PK,FK2 |                           | TITLE_COPY   | TITLE_ID   | NUMBER   | 10         |

#### 表名: RESERVATION

|    列名   |  キー  | NULL/ Unique | FK Ref Table | FK Ref Col | データ型 | データ長 |
|-----------|--------|--------------|--------------|------------|----------|----------|
| RES_DATE  | PK     | NN,U         |              |            | DATE     |          |
| MEMBER_ID | PK,FK1 | NN,U         | MEMBER       | MEMBER_ID  | NUMBER   |       10 |
| TITLE_ID  | PK,FK2 | NN,U         | TITLE        | TITLE_ID   | NUMBER   |       10 |


## 11/7 - 8
### 「hr」ユーザ

1. 部門ごとの平均給与が最高額の部門の部門ID、その平均額及び  
その部門での最低給与を表示(1107.1.sql)
1. 販売担当者(SA_REP)が勤務していない部門の部門ID、部門名、  
マネージャID、所在地IDを表示  
部門IDの昇順でソート(1107.2.sql)
1. 従業員が3人未満の部門の部門ID、部門名、人数を表示  
部門IDの昇順でソート(1107.3.sql)
1. 曜日ごとの雇用された人の人数を表示  
日、月、火...土曜日の順でソート(1107.4.sql)
1. 部門ID、部門の平均給与、それぞれの行に所属員の姓を給与の降順で  
表示(LISTAGG関数を使用、列別名はMEMBER_LIST)(1107.5.sql)
1. 従業員が最多の部門の部門ID、部門名、人数を表示(1107.6.sql)
1. 従業員が1人もいないの部門ID、部門名、人数を表示  
部門IDの昇順でソート(1107.7.sql)

## 11/2
### 「hr」ユーザ

1. プロンプトを表示させユーザに所在地IDを入力させ、その場所で勤務する  
従業員の部門名、所在地ID、姓、職種および給与を表示(1102.1.sql)
1. 姓の最後の文字が「n」の従業員の数を表示(1102.2.sql)
1. 部門ID、部門名、所在地ID、所属する従業員の人数を表示  
所属する従業員がいない部門も表示(人数は0となる)  
部門IDの昇順でソート(1102.3.sql)
1. 月の前半(16日より前)に雇用された従業員の姓、雇用日付を表示  
雇用日付の昇順でソート(1102.4.sql)
1. 給与が$1,500を超えるマネージャがいる全従業員を表示  
従業員の姓、マネージャの姓、マネージャの給与を表示。  
従業員の姓の昇順でソート(1102.5.sql)

## 11/1
### 「hr」ユーザ - EMPLOYEES表

1. 歩合を受け取る従業員の姓、職務、給与、歩合を表示  
給与の降順でソート(1101.1.sql)
1. 歩合を受け取らない従業員の姓、給与、昇給10%(端数は切り捨て)を表示  
給与の降順で上位5%(1101.2.sql)
1. 従業員の姓、勤務年数および月数を表示(列別名はYEARS、MONTHS)  
勤務年数の降順で上位10名(1101.3.sql)
1. 姓の最初の文字が「J」、「K」、「L」または「M」の従業員の姓を表示  
(1101.4.sql)
1. 全従業員の姓、給与および歩合給を受け取りかどうかYes、Noで表示  
(列別名はCOMM)。DECODE関数を使用(1101.5.sql)


## 10/30
### 各自のユーザ

1. EMPLOYEES2表(10/26作成)の状態を読取り専用に変更し、データを追加  
しようとすると読み取り専用で追加できない旨のメッセージが表示されること
1. DEPT表(10/26作成)の削除を試み、エラーとなり削除できないことを  
確認
1. EMP表(10/26作成)、DEPT表の順では正常に削除できることを確認
1. HRのEMPLOYEES表の従業員番号、従業員名および部門番号を表示する  
EMPLOYEES_VUというビューを作成
1. HRのEMPLOYEES表の部門50のすべての従業員の従業員番号、  
  従業員の姓、部門番号が表示される、DEPT50というビューを作成。  
  ビューの列にはEMPNO、EMPLOYEEおよびDEPTNOというラベルを付ける  
  セキュリティ上の理由から、ビューを通じて別の部門に従業員を変更する  
  操作を許可しない

## 10/26
### 各自のユーザ

#### DEPT表

| 列名 | キーの種類  | NULL/一意 | FK表 | FK列 | データ型 | 長さ |
|------|-------------|-----------|------|------|----------|-----:|
| ID   | Primary Key |           |      |      | NUMBER   |    7 |
| NAME |             |           |      |      | VARCHAR2 |   25 |

#### EMP表

| 列名       | キーの種類    | NULL/一意   | FK表   | FK列   | データ型   | 長さ   |
| ------     | ------------- | ----------- | ------ | ------ | ---------- | -----: |
| ID         | Primary Key   |             |        |        | NUMBER     | 7      |
| LAST_NAME  |               |             |        |        | VARCHAR2   | 25     |
| FIRST_NAME |               |             |        |        | VARCHAR2   | 25     |
| DEPT_ID    |               |             | DEPT   | ID     | NUMBER     | 7       |

1. 上記のチャートに基づいてDEPT表を作成
1. DEPT表にhrのDEPARTMENTS表からデータをコピー。必要な列のみ
1. 上記のチャートに基づいてEMP表を作成
1. EMP表にhrのEMPLOYEES表からデータをコピー。必要な列のみ
1. hrのEMPLOYEES表の構造に基づいてEMPLOYEES2表を作成。EMPLOYEE_ID、  
FIRST_NAME、LAST_NAME、SALARY及びDEPARTMENT_ID列のみ  
列名はそれぞれID、FIRST_NAME、LAST_NAME、SAL、DEPT_ID

## 10/25
### 各自のユーザ

1. 従業員3の姓をDrexlerに変更
1. 給与が$900未満の従業員すべての給与を$1,000に変更
1. MY_EMPLOYEES表からBetty Dancsを削除
1. 変更をすべてコミット
1. 一旦、すべてのデータを削除し、ロールバックを行う

## 10/24
### 各自のユーザ

MY_EMPLOYEES表(1024.sql)

|    Name    |   Null   |     Type     |
|------------|----------|--------------|
| ID         | NOT NULL | NUMBER(4)    |
| LAST_NAME  |          | VARCHAR2(25) |
| FIRST_NAME |          | VARCHAR2(25) |
| USERID     |          | VARCHAR2(8)  |
| SALARY     |          | NUMBER(9,2)  |

サンプルデータ

| ID | LAST_NAME | FIRST_NAME |  USERID  | SALARY |
|:--:|-----------|------------|----------|-------:|
|  1 | Patel     | Ralph      | rpatel   |    895 |
|  2 | Dancs     | Betty      | bdancs   |    860 |
|  3 | Biri      | Ben        | bbiri    |   1100 |
|  4 | Newman    | Chad       | cnewman  |    750 |
|  5 | Rpeburn   | Audrey     | aropebur |   1550 |

1. MY_EMPLOYEES表の作成
1. サンプルの最初の行をMY_EMPLOYEES表に追加する  
INSERT句には列リストを指定しない
1. サンプルに2行目のをMY_EMPLOYEES表に追加  
今度はINSERT句に列リストを指定する
1. 残りの行をMY_EMPLOYEE表にロードするINSERT文を、  
動的に再利用可能なスクリプト・ファイルに記述します。  
スクリプトでは、すべての列(ID、LAST_NAME、FIRST_NAME、  
USERIDおよびSALARY)の入力をユーザーに求める必要があります。  
このスクリプトを1024.1.sqlファイルに保存
1. 残りのデータを上記のスクリプトファイルを用いて追加

## 10/19
### 「hr」ユーザ
1. 従業員の以前の職務IDと現行の職務IDを従業員IDの昇順  
で従業員IDと職務IDのリストを表示。  
この時、従業員IDと職務IDの組み合わせの重複は排除(1019.1.sql)
1. 職務IDのST_CLERKが含まれない部門の部門IDのリストを  
集合演算子を使用して表示(1019.2.sql)
1. 部門が存在しない国の国IDと国名を集合演算子を使用して  
表示(1019.3.sql)
1. 部門10、50および20に対する職務のリストをこの順に出力。  
集合演算子を使用して職務IDと部門IDを表示(1019.4.sql)
1. 現行の職務が会社に雇用された当初の職務と同じ  
(つまり職務を異動したが、現在は元の職務に戻っている)  
従業員の従業員IDと職務IDのリストを表示(1019.5.sql)


## 10/18
### 「hr」ユーザ
1. ユーザーに従業員の姓の入力を求めるプロンプトを表示し、  
入力された名前の従業員と同じ部門に所属するすべての従業員  
(入力した従業員は除く)の姓と雇用日を表示(1018.1.sql)
1. 給与が平均給与より多い従業員の従業員番号、姓および給与  
を給与の昇順で上位の5名表示(1018.2.sql)
1. 姓に“u”の文字が含まれる従業員が所属する部門に勤務する  
すべての従業員の従業員番号と姓を表示(1018.3.sql)
1. 部門の所在地IDが1700であるすべての従業員の姓、部門番号  
および職務IDを表示(1018.4.sql)
1. Kingを上司とするすべての従業員の姓と給与を表示(1018.5.sql)


## 10/17
### 「hr」ユーザ
1. LOCATIONS表とCOUNTRIES表をNATURAL JOINで結合し、  
所在地ID、番地、市、州または県、および国を表示(1017.1.sql)
1. 従業員の姓、部門番号および部門名を表示する  
従業員番号の昇順で上位の20名表示(1017.2.sql)
1. トロントで勤務しているすべての従業員の姓、職務、部門番号  
および部門名を表示(1017.3.sql)
1. 従業員の姓、従業員番号および担当マネージャの姓とマネージャ番号を表示  
列には、Employee、Emp#、ManagerおよびMgr#の別名(1017.4.sql)
1. 上記と同様な表示で、担当マネージャのいないKingを含める(1017.5.sql)
## 10/12
### 「hr」ユーザ
1. 従業員の従業員番号、職務およびDECODE関数を使用して  
以下の対応表を元に職務に基づく等級を表示(1012.1.sql)
1. CASE構文を使用して上記と同様の表示(1012.2.sql)
1. すべての従業員の給与の最高額、最低額、合計および平均を表示。  
列名はそれぞれMaximum、Minimum、Sum、Average。  
結果を最も近い整数に丸めて表示(1012.3.sql)
1. 職種ごとの給与の最低額、最高額、合計および平均を表示。  
列名はそれぞれMaximum、Minimum、Sum、Average。  
結果を最も近い整数に丸めて職種名の昇順で表示(1012.4.sql)
1. 同じ職務の従業員の数を職種名の昇順で表示(1012.5.sql)


|         職務         | 等級 |
|----------------------|:----:|
| AD_PRES              | A    |
| ST_MAN               | B    |
| IT_PROG              | C    |
| SA_REP               | D    |
| ST_CLERK             | E    |
| 上記のいずれでもない | 0     |



## 10/11
### 「hr」ユーザ
1. 2008年以降に雇用された従業員の従業員番号、姓、給与、雇用日付を  
雇用日付が新しい順に表示(1011.1.sql)
1. 歩合を受け取る従業員の姓、職務、給与および歩合を給与の降順で  
表示(1011.2.sql)
1. 従業員の姓と歩合の額を表示する。従業員が歩合を受け取らない場合は  
「No Commission」と表示。列名はCOMM(1011.3.sql)
1. 次のような形式でデータを表示  
<従業員の姓> earns <給与> montly but wants <給与の3倍>.  
列名はDream Salaries、給与の少ない順に5名表示(1011.4.sql)
1. 従業員の姓、雇用日、および6ヶ月の雇用期間後の最初の月曜日  
となる給与審査日を表示。列名はREVIEW  
「Monday, the Thirty-First of July, 2000」  
のような形式表示されるように日付の書式を設定  
従業員番号の昇順で上位の5名表示(1011.5.sql)

|                    Dream Salaries                     |
|:-------------------------------------------------------|
| Gienz earns $8,300.00 monthly but wants $24,900.00.    |
| Higgins earns $12,000.00 monthly but wants $36,000.00. |
| ・・・                                                 |

| LAST_NAME | HIRE_DATE |                   REVIEW                   |
|-----------|-----------|--------------------------------------------|
| King      | 17-JUN-87 | Monday, the Twenty-First of December, 1987 |
| Kochhar   | 21-SEP-89 | Monday, the Twenty-Sixth of March, 1990    |
| ・・・    |           |                                            |

## 10/10
### 「hr」ユーザ
1. 歩合が20%である従業員の姓、給与、歩合を表示(1010.1.sql)
1. システムの日付を表示する問い合わせ、列にDateというラベルをつける(1010.2.sql)
1. 従業員番号、姓、給与、15.5%増額された給与(整数で表示、列名はNew Salary)を  
給料の少ない順に5名表示(1010.3.sql)
1. 従業員ごとに姓を表示して、その従業員が雇用された日付から今日までの月数を  
計算(列名はMONTHS_WORKED)、月数は最も近い整数に丸め、月数の多い5名表示(1010.4.sql)
1. 従業員の姓と給与を給与の多い順に5名表示、給与は15文字長に設定し  
左側に$記号を埋め込む。列名はSALARY(1010.5.sql)

| LAST_NAME |      SALARY      |
|-----------|------------------|
| King      | $$$$$$$$$$$24000 |
| Kochhar   | $$$$$$$$$$$17000 |
| ・・・    |                  |



## 10/5
### 「hr」ユーザ
1. 給与が$12,000を超える従業員の姓名、給与の多い順に5名(1005.1.sql)  
1. 従業員番号176の姓名、部門番号(1005.2.sql)  
1. 給与が$5,000から$12,000の範囲に従業員の人数(1005.3.sql)  
1. 姓がMatosおよびTaylorである従業員の姓、職務ID、開始日(1005.4.sql)  
1. 部門20または50に所属する従業員の人数(1005.5.sql)  